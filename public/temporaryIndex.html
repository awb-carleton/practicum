<!DOCTYPE html>
<html>
<head lang="en">
    <title>Practice-That!</title>
    <link href="images/squirtle.png" type="image/gif" rel="shortcut icon" />
    <!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel= "stylesheet"> -->

    <!-- load common styles from bootstrap -->
    <link href="css/bootstrap/bootstrap.min.css" type="text/css" rel="stylesheet" />

    <!-- load local files after to override bootstrap styling -->
    <link href="common.css" type="text/css" rel="stylesheet" />
    <link href="indexlayout.css" type="text/css" rel="stylesheet" />
    <link href="css/csed.css" type="text/css" rel="stylesheet" />
    <link href="expressions/bootstrap-expressions.css" type="text/css" rel="stylesheet" />

    <!-- load jQuery before cookie plugin, bootstrap, d3 -->
    <script src="js/jquery/jquery-1.11.2.min.js"></script>

    <script src="js/jquery/jquery.cookie.js"></script>
    <script src="js/bootstrap/bootstrap.min.js"></script>
    <script src="js/d3/d3.js"></script>

    <script src="js/fetch/fetch.js"></script>
    <script src="js/papika.js"></script>

    <script src="simulator/main.js"></script>
    <script src="simulator/parser.js"></script>
    <script src="simulator/simulator.js"></script>
    <script src="simulator/explainer.js"></script>
    <script src="simulator/algorithms/expressionsHelper.js"></script>

    <script src="expressions/thoughtProcess.js"></script>
    <script src="expressions/expressions.js"></script>

    <meta charset="UTF-8">
</head>
<body>

<script>

    var problem = {
        "id": "86fdd9c7-1004-4e33-a0f4-2fb3634c8958",
        "category": "expressions",
        "title": "22 % 7 + 4 * 3 - 6.0 / 2",
        "url": "expressions/problemTemplate.html",
        "initialState": {
            promptText: "",
            highlighted: [[]],
            "problemLines": [
                [
                    {"type": "int", "value": 22},
                    {"type": "MDMoperator", "value": "%"},
                    {"type": "int", "value": 7},
                    {"type": "ASoperator", "value": "+"},
                    {"type": "int", "value": 4},
                    {"type": "MDMoperator", "value": "*"},
                    {"type": "int", "value": 3},
                    {"type": "ASoperator", "value": "-"},
                    {"type": "double", "value": 6.0},
                    {"type": "MDMoperator", "value": "/"},
                    {"type": "double", "value": 2}
                ]
            ]
        }
    };

    function CallbackObject() {

        this.getNextState = function() {
            return main_simulator.next();
        }

    }

    window.onload = function() {

        var state = problem.initialState;

        main_simulator.initialize("expressions", {state:state}).then(function() {
            console.log("finished initializing simulator");
            expressions.initialize(null, problem, new CallbackObject());
        }, function(error) {
            console.error("something went wrong: ");
            console.log(error);
        });


    }
</script>

<!--
    <div class="topnavContainer topnavContainerScroll">
    </div>
-->
<nav class="navbar navbar-default navbar-csed">
    <div class="container-fluid">
        <a id="home-link" class="navbar-brand" href="#">
            <img alt="Home" src="images/home-icon.png" />
        </a>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

            <!-- placeholder div for problems to be put into -->
            <ul id="problems-nav-container" class="nav navbar-nav">
            </ul>

            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span id="__username"><?= $username ?></span><span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#" data-toggle="modal" data-target="#consent-form-modal">Consent Form</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>



<!-- placeholder div for the problem content to go in -->
<div id="problem" class="container container-fluid">
    <h2 id="expressionHeader"></h2>


    <!--This form id box currently posts to a php page, but in the future should ultimately be handled by JavaScript.
    See this example: http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_form_submit -->
    <div id="answerbox">
        <div class='boxcenter'>
            <input id='box' name="checkanswer" type="text" autofocus="autofocus" />
        </div>

        <div id='stepshell'></div>

        <div id="lastbutton" class = 'buttonLineUp'>
            <button class='buttons' type="button" id="submit">Submit</button>
            <button class='buttons' type="button" id="nextstep">Steps</button>
        </div>
    </div>

    <div id="dummy">

</div>

</body>
</html>